<!DOCTYPE html>
<html>
<head></head>
<body>
    <canvas id="canvas1" width="300" height="300"
            onmousedown="onMouseDownHandler(event)"
            onmouseup="onMouseUpHandler(event)"
            style="border:1px solid blue"></canvas>
    <hr/>
    <p>Local Storage: Data management</p>
    <button onclick="onStoreDataLocalStorage()">Store data</button>
    <button onclick="onRestoreDataLocalStorage()">Restore data</button>

    <script>
        var startPoint = { x: 0, y: 0 };
        var endPoint = { x: 0, y: 0 };
        var lines = []; 
        
        function drawLine(lineData) {
            const cnvs = document.getElementById('canvas1');
            const ctx = cnvs.getContext("2d");
            ctx.beginPath();
            ctx.moveTo(lineData.startpoint.x, lineData.startpoint.y);
            ctx.lineTo(lineData.endpoint.x, lineData.endpoint.y);
            ctx.strokeStyle = lineData.color;
            ctx.lineWidth = lineData.thickness;
            ctx.stroke();
        }

        
        function onMouseDownHandler(e) {
            console.log("Mouse Down");
            let x = e.clientX - e.target.offsetLeft;
            let y = e.clientY - e.target.offsetTop;
            startPoint.x = x;
            startPoint.y = y;
        }

        
        function onMouseUpHandler(e) {
            console.log("Mouse Up");
            let x = e.clientX - e.target.offsetLeft;
            let y = e.clientY - e.target.offsetTop;
            endPoint.x = x;
            endPoint.y = y;

            
            let lineData = {
                startpoint: { x: startPoint.x, y: startPoint.y },
                endpoint: { x: endPoint.x, y: endPoint.y },
                thickness: 2,
                color: "blue"
            };

            
            drawLine(lineData);

            
            lines.push(lineData);
        }

        
        function onStoreDataLocalStorage() {
            localStorage.setItem('lines', JSON.stringify(lines));
        }

        
        function onRestoreDataLocalStorage() {
            let storedLines = localStorage.getItem('lines');
            if (storedLines) {
                let restoredLines = JSON.parse(storedLines);
                console.log("Restored from Local Storage:", restoredLines);

                
                restoredLines.map(line => {
                    drawLine(line);
                });

                
                lines = restoredLines;
            } else {
                console.log("No data in local storage.");
            }
        }

    
        window.onload = function() {
            onRestoreDataLocalStorage();
        };
    </script>
</body>
</html>
